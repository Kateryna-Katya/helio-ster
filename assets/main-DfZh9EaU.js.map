{"version":3,"file":"main-DfZh9EaU.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * HELIO-STER BLOG - Main Script (Native JS)\n * Version: 1.1 (Fixed Captcha & Horizontal Scroll)\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  // --- 1. СОСТОЯНИЕ И ПЕРЕМЕННЫЕ ---\n  const state = {\n      captchaResult: 0,\n      isMenuOpen: false\n  };\n\n  const body = document.body;\n  const nav = document.getElementById('nav-menu');\n  const burger = document.getElementById('burger-menu');\n  const contactForm = document.getElementById('ai-contact-form');\n  const phoneInput = document.getElementById('user-phone');\n  const cookiePopup = document.getElementById('cookie-popup');\n\n  // --- 2. МОБИЛЬНОЕ МЕНЮ (БЕЗ СКРОЛЛА И БАГОВ) ---\n  if (burger && nav) {\n      const toggleMenu = (isOpen) => {\n          state.isMenuOpen = isOpen;\n          burger.classList.toggle('open', isOpen);\n          nav.classList.toggle('active', isOpen);\n          // Блокируем скролл только если меню открыто\n          body.style.overflow = isOpen ? 'hidden' : '';\n      };\n\n      burger.addEventListener('click', (e) => {\n          e.stopPropagation();\n          toggleMenu(!state.isMenuOpen);\n      });\n\n      // Закрытие при клике на ссылки\n      nav.querySelectorAll('a').forEach(link => {\n          link.addEventListener('click', () => toggleMenu(false));\n      });\n\n      // Закрытие при клике вне меню\n      document.addEventListener('click', (e) => {\n          if (state.isMenuOpen && !nav.contains(e.target) && !burger.contains(e.target)) {\n              toggleMenu(false);\n          }\n      });\n  }\n\n  // --- 3. ВАЛИДАЦИЯ ТЕЛЕФОНА (ТОЛЬКО ЦИФРЫ) ---\n  if (phoneInput) {\n      phoneInput.addEventListener('input', (e) => {\n          // Удаляем всё, кроме цифр\n          e.target.value = e.target.value.replace(/[^0-9]/g, '');\n      });\n  }\n\n  // --- 4. МАТЕМАТИЧЕСКАЯ КАПЧА ---\n  function generateCaptcha() {\n      const captchaQ = document.getElementById('captcha-question');\n      const captchaInput = document.getElementById('captcha-answer');\n\n      if (captchaQ) {\n          const a = Math.floor(Math.random() * 10) + 1;\n          const b = Math.floor(Math.random() * 10) + 1;\n          state.captchaResult = a + b;\n          captchaQ.innerText = `${a} + ${b}`;\n          if (captchaInput) captchaInput.value = ''; // Очистка при регенерации\n      }\n  }\n  generateCaptcha();\n\n  // --- 5. ОБРАБОТКА ФОРМЫ (AJAX SIMULATION) ---\n  if (contactForm) {\n      contactForm.addEventListener('submit', async (e) => {\n          e.preventDefault();\n\n          const answerInput = document.getElementById('captcha-answer');\n          const messageBox = document.getElementById('form-message');\n          const btn = document.getElementById('submit-btn');\n          const userAnswer = parseInt(answerInput.value, 10);\n\n          // Проверка капчи\n          if (userAnswer !== state.captchaResult) {\n              showFormMessage('Ошибка: Неверный ответ капчи. Попробуйте снова.', 'error');\n              generateCaptcha();\n              return;\n          }\n\n          // Имитация отправки\n          btn.disabled = true;\n          const originalBtnText = btn.innerHTML;\n          btn.innerText = 'Отправка данных...';\n\n          try {\n              // Имитируем сетевую задержку 1.5 сек\n              await new Promise(resolve => setTimeout(resolve, 1500));\n\n              showFormMessage('Успех! Мы получили ваш запрос и свяжемся с вами.', 'success');\n              contactForm.reset();\n              generateCaptcha();\n          } catch (error) {\n              showFormMessage('Произошла ошибка при отправке. Попробуйте позже.', 'error');\n          } finally {\n              btn.disabled = false;\n              btn.innerHTML = originalBtnText;\n          }\n      });\n\n      function showFormMessage(text, type) {\n          const messageBox = document.getElementById('form-message');\n          messageBox.innerText = text;\n          messageBox.className = `form__message ${type}`;\n          messageBox.style.display = 'block';\n\n          // Автоскрытие через 6 секунд\n          setTimeout(() => {\n              messageBox.style.display = 'none';\n          }, 6000);\n      }\n  }\n\n  // --- 6. COOKIE POPUP (LOCAL STORAGE) ---\n  if (cookiePopup) {\n      const isAccepted = localStorage.getItem('helio_cookies_accepted');\n      const acceptBtn = document.getElementById('cookie-accept');\n\n      if (!isAccepted) {\n          setTimeout(() => {\n              cookiePopup.classList.add('show');\n          }, 3000); // Показываем через 3 сек\n      }\n\n      acceptBtn.addEventListener('click', () => {\n          localStorage.setItem('helio_cookies_accepted', 'true');\n          cookiePopup.classList.remove('show');\n      });\n  }\n\n  // --- 7. ПЛАВНЫЙ СКРОЛЛ И АНИМАЦИИ ПОЯВЛЕНИЯ ---\n  // Плавный скролл для якорей\n  document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n      anchor.addEventListener('click', function(e) {\n          e.preventDefault();\n          const targetId = this.getAttribute('href');\n          if (targetId === '#') return;\n\n          const targetElement = document.querySelector(targetId);\n          if (targetElement) {\n              targetElement.scrollIntoView({\n                  behavior: 'smooth',\n                  block: 'start'\n              });\n          }\n      });\n  });\n\n  // Intersection Observer для появления блоков (.reveal)\n  const revealOptions = {\n      threshold: 0.15,\n      rootMargin: \"0px 0px -50px 0px\"\n  };\n\n  const revealObserver = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n          if (entry.isIntersecting) {\n              entry.target.classList.add('is-visible');\n              // Прекращаем наблюдение после активации\n              revealObserver.unobserve(entry.target);\n          }\n      });\n  }, revealOptions);\n\n  document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));\n});"],"names":["state","body","nav","burger","contactForm","phoneInput","cookiePopup","toggleMenu","isOpen","link","e","generateCaptcha","captchaQ","captchaInput","a","b","showFormMessage","text","type","messageBox","answerInput","btn","originalBtnText","resolve","isAccepted","acceptBtn","anchor","targetId","targetElement","revealOptions","revealObserver","entries","entry","el"],"mappings":"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"}